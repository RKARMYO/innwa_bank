<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title>Innwa</title>
	


	<!-- Font Awesome -->
	<link rel="stylesheet" href="css/all.css">
	<!-- Bootstrap core CSS -->
	<link rel="stylesheet" href="css/mdb.min.css">
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<!-- Material Design Bootstrap -->
	
	<!-- Our custom styles (optional) -->
	<link rel="stylesheet" href="css/teamcs.css">
	<link rel="icon" href="images/app_icon.png" type="image/gif" sizes="16x16">
	<link rel="stylesheet" href="js/sweetalert2.css">
	

	<style>
		.impcolor
		{
			color: red;
			font-weight: bold;
		}
		.my_card{
			margin-bottom: 20px;
		}
		.no_link{
			text-decoration: none;
		}
		@font-face 
		{
		  font-family: 'Pyidaungsu';
		  src: URL('font/Pyidaungsu.ttf') format('truetype');
		  /*src: URL('font/Win.ttf') format('truetype');*/
		}
		body
		{
			font-family: Pyidaungsu;
		}
		.menudiv
		{
			width: 96%;
			height: 50px;
			margin-left: 2%;
			background: rgb(2,110,116);
			border-radius: 5px;
		}
		.menudiv1,.menudiv2
		{
			width: 40%;
			height: 40px;
			margin-top: 5px;
			float: left;
			margin-left: 7%;
			border-radius: 7px;
		}
		.menudiv3
		{
			width: 33%;
			height: 60px;
			float: left;
			border-radius: 7px;
		}
		.menudiv1
		{
			background-color:  #239b56  ;
		}
		.menudiv2
		{
			background-color:  #17a589 ;
		}
		a
		{
			color: white;
			text-decoration: none;
		}
		.income
		{
			color: white;
		}
		.income:hover,.closeown:hover,.insert:hover
		{
			cursor: pointer;
			color: blue;
		}
		.mymodal,#plusmodal,#incomemodal
		{
			width: 98%;
			height: 100%;
			z-index: 1000;
			position: absolute;
			left: 1%;
			top: 65px;
			display: none;
		}
		.mymodal
		{
			background-color:#f9e79f  ;
		}
		#plusmodal,#incomemodal
		{
			background-color: rgba(0,0,0,0.2);
		}
		.plusbtn
		{
			width: 60px;
			height: 60px;
			color: green;
		}
		.minusbtn
		{
			width: 60px;
			height: 60px;
			color: red;
		}
		.report
		{
			width: 60px;
			height: 60px;
			color: blue;
		}
		#toappend
		{
			width: 100%;
			height:auto;
			overflow: auto;
		}
		.insert,.closeown
		{
			width: 40%;height: 100%;margin-left: 7%;float: left;color: white;border-radius: 6px;
		}
		/* .insert
		{
			background-color: green;
		} */
		/* .closeown
		{
			background-color: red;
		} */
		#mychart
		{
			display: none;
		}
		.closeadd,.closeincome
		{
			color: white;
		}
		table
		{
			text-align: left;
		}
		th
		{
			color:teal;
		}
		td
		{
			color:blue;
		}
	</style>
</head>

<body class="fixed-sn white-skin">

	<!-- Main Navigation -->
	<header>
		
		<!-- Navbar -->
		<nav class="navbar fixed-top navbar-expand-lg scrolling-navbar double-nav" id="nav_id">
			<!-- SideNav slide-out button -->
			<div class="float-left"> <a href="#" data-activates="slide-out" class="button-collapse"><i class="fas fa-bars" style="display: none;"></i></a>
			</div>
			<!-- Breadcrumb -->
			<div class="title_text mr-auto align-center text-center">
				<h4 id="header_id">အင်းဝဘဏ်</h4>
			</div>
		</nav>
		
	</header>
	<!-- Main Navigation -->

	<!-- Main layout -->
	<main>
		<div class="container-fluid">
			<!-- Section: Intro -->
			<section id="intro_section">
				<center>
					<span>လစာထုတ်ရန် (<span class="impcolor" id="remaining_day"></span>)ရက်သာလိုတော့သည်!</span>
					<br>
					<span>လစာထုတ်ရက် (<span class="impcolor" id="remaining_date"></span>) နေ့</span>
				</center>
					<hr>
					
					<div class="menudiv">
						<div class="menudiv1">
							<!-- <center><a href="https://ablmm.com/online">လစာကြည့်ရန်</a></center> -->
							<div style="margin-top: 5px;"><center><a href="https://ablmm.com/online">လစာကြည့်ရန်</a></center></div>
						</div>
						<div class="menudiv2">
							<div style="margin-top: 5px;" class="income"><center><span>ဝင်ငွေထွက်ငွေ</span></center></div>
						</div>
					</div>
					<!-- Grid row -->
					<div class="row">
						<div class="col-lg-4 col-md-6 my_card">
							<div class="card testimonial-card ">
								<a href="https://ablmm.com/online"><img src="iconss/innwa.gif" style="width: 100%;height:400px;"></img></a>
							</div>
						</div>
					</div>
					<!-- row -->
				</div>
				

				<!-- =========================== custom modal ========================= -->
				<div class="mymodal">


					<div style="width: 100%;height: 60px;margin-top: 0px;">
						
						<button type="button" class="close" id="modalclose" aria-label="Close">
							<span aria-hidden="true" style="color: red;font-weight: bold;">×</span>
						</button>
						<div class="menudiv3" style="margin-top: 23px;">
							<center><i class="fas fa-plus-circle plusbtn"></i></center>
						</div>
						<div class="menudiv3" style="margin-top: 23px;">
							<center><i class="fas fa-minus-circle minusbtn"></i></center>
						</div>
						<div class="menudiv3">
							<center><i class="fas fa-chart-line report"></i></center>
						</div>
						
						<div id="toappend">
							<!-- <div style="width: 100%;height: 45px;">
								<center>
								<table class="mytable" cellspacing='0' width='100%' style="background-color: rgba(0,0,0,0.2);">
									<tr><td>ရက်စွဲ</td><td>ခေါင်းစဉ်</td><td>ပမာဏ</td><td>ဝင်ငွေစုစုပေါင်း</td></tr>
									<tr><td>1.1.2020</td><td>Test</td><td>6000</td><td>10000</td></tr>
								</table>
								</center>
							</div> -->
						</div>
					</div><br>
					<!-- ========== Chart =============-->
					<div id="mychart" style="padding-top:125px;">
						<canvas id="pieChart"></canvas>
					</div>
					<!-- ========== End Chart =============-->
						
					

				</div>
				<!-- ========================== end custom modal ================================= -->
				<!-- ================ add outcome =============================-->
				<div id="plusmodal" >
					<div style="width: 80%;height: 250px;margin-top: 20%;margin-left: 10%;background-color: white;border-radius: 7px;">
						<br>
						<center><span style="color: blue;">ထွက်ငွေ</span></center>
						<div style="width:90%;height:40px;margin-left:5%;margin-top: 20px;">
							<select class="browser-default custom-select outcometype">
							  <option selected>အမျိုးအစားရွေးချယ်ပါ</option>
							  <option value="အစားအစာ">အစားအသောက်</option>
							  <option value="အဝတ်အစား">အဝတ်အစား</option>
							  <option value="ဖုန်းဘေ">ဖုန်းဘေ</option>
							  <option value="အလှူ">အလှူ</option>
							  <option value="မိဘကန်တော့">မိဘကန်တော့</option>
							  <option value="အကြွေး">အကြွေး</option>
							  <option value="အထွေထွေ">အထွေထွေ</option>
							</select>
						</div>
						<div style="width:90%;height:40px;margin-left:5%;margin-top: 20px;">
							<input type="number" class="form-control" id="outcomeamount" placeholder="ပမာဏ...">
						</div>
						<div style="width:90%;height:40px;margin-left:5%;margin-top: 20px;">
							<div class="saveoutcome insert">
								<!-- <center><div style="margin-top: 7px;" class="insertoutcome"><span>သိမ်းမည်</span></div></center> -->
								<button type="button" class="btn btn-rounded btn-primary insertoutcome"><i class="fas fa-save pr-2" aria-hidden="true"></i>သိမ်းမည်</button>
							</div>
							<div class="closeadda closeowna">
								<!-- <center><div style="margin-top: 7px;"><span>ပိတ်မည်</span></div></center> -->
								<button type="button" class="btn btn-rounded btn-amber closeadd"><i class="fas fa-times pr-2" aria-hidden="true"></i>ပိတ်မည်</button>
							</div>
						</div>
					</div>
				</div>
				<!-- ================ add outcome =============================-->
				<!-- ================ add income =============================-->
				<div id="incomemodal">
					<div style="width: 80%;height: 250px;margin-top: 20%;margin-left: 10%;background-color: white;border-radius: 7px;">
						<br>
						<center><span style="color: blue;">ဝင်ငွေ</span></center>
						<div style="width:90%;height:40px;margin-left:5%;margin-top: 20px;">
							<input type="text" class="form-control" id="incometitle" placeholder="ခေါင်းစဉ်...">
						</div>
						<div style="width:90%;height:40px;margin-left:5%;margin-top: 20px;">
							<input type="number" class="form-control" id="incomeamount" placeholder="ပမာဏ...">
						</div>
						<div style="width:90%;height:40px;margin-left:5%;margin-top: 20px;">
							<div class="saveincomea insert">
								<!-- <center><div style="margin-top: 7px;"><span>သိမ်းမည်</span></div></center> -->
								<button type="button" class="btn btn-rounded btn-primary saveincome"><i class="fas fa-save pr-2" aria-hidden="true"></i>သိမ်းမည်</button>
							</div>
							<div class="closeincome closeowna">
								<!-- <center><div style="margin-top: 7px;"><span>ပိတ်မည်</span></div></center> -->
								<button type="button" class="btn btn-rounded btn-amber closeincome"><i class="fas fa-times pr-2" aria-hidden="true"></i>ပိတ်မည်</button>
							</div>
						</div>
					</div>
				</div>
				<!-- ================ add income =============================-->
			</section>
			<!-- Section: Intro -->
		</div>
	</main>
	<!-- Main layout -->

	<!-- Footer -->
	<footer class="page-footer pt-0 mt-5 rgba-stylish-light">
		<!-- Copyright -->
		<div class="footer-copyright py-3 text-center">
			<div class="container-fluid">Developed By : <a href="https://www.facebook.com/mmsoftware100"> TEAM CS </a>
				<br>
				<center>Version <span style="color: red;">2.0</span></center>
			</div>
		</div>
	</footer>
	<!-- Footer -->


	<!-- SCRIPTS -->
	<!-- JQuery -->
	<script src="js/jquery-3.4.1.min.js"></script>
	<!-- Bootstrap tooltips -->
	<script type="text/javascript" src="js/popper.min.js"></script>
	<!-- Bootstrap core JavaScript -->
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<!-- MDB core JavaScript -->
	<!-- <script type="text/javascript" src="js/mdb.min.js"></script> -->

	
	<script src="js/modernizr.js"></script>
	<script src="js/popper.min.js"></script>
	<script src="js/underscore.min.js"></script>
	<script src="js/backbone.js"></script>
	<script src="js/sweetalert2.js"></script>
	<script src="js/chart.js"></script>


	<!-- Initializations -->
	<script type="text/javascript">
		

		function convertEngToMyanmar(num)
			{
				num += "";
				num = num.split(0).join("၀");
				num = num.split(1).join("၁");
				num = num.split(2).join("၂");
				num = num.split(3).join("၃");
				num = num.split(4).join("၄");
				num = num.split(5).join("၅");
				num = num.split(6).join("၆");
				num = num.split(7).join("၇");
				num = num.split(8).join("၈");
				num = num.split(9).join("၉");
				return num;
			}
		// =========== get from local storage =============
		function getdata()
		{
			$("#toappend").empty();
			var rkm=localStorage.localdata;
			if(rkm)
			{
				var data=JSON.parse(rkm);
				//$("#toappend").append('</table></center></div>');
				for(i=0;i<data.length;i++)
				{
					$("#toappend").prepend('<div style="width: 100%;height: 45px;margin-top:7px;"><center><table class="mytable" cellspacing="0" width="100%" style="background-color: rgba(0,0,0,0.2);"><tr><th>ရက်စွဲ</th><th>ခေါင်းစဉ်</th><th>ပမာဏ</th><th>ဝင်ငွေစုစုပေါင်း</th></tr><tr><td>'+convertEngToMyanmar(data[i].date+'/'+data[i].newmonth+'/'+data[i].newyear)+'</td><td>'+data[i].title+'</td><td>'+convertEngToMyanmar(data[i].amount)+' ကျပ်</td><td>'+convertEngToMyanmar(data[i].totals)+' ကျပ်</td></tr></table></center></div>');
					//$("#toappend").prepend('<tr><td>'+convertEngToMyanmar(data[i].date+'/'+data[i].newmonth+'/'+data[i].newyear)+'</td><td>'+data[i].title+'</td><td>'+convertEngToMyanmar(data[i].amount)+' ကျပ်</td><td>'+convertEngToMyanmar(data[i].totals)+' ကျပ်</td></tr>');
				}
				//$("#toappend").prepend('<div style="width: 100%;height: 45px;margin-top:7px;"><center><table class="mytable" cellspacing="0" width="100%" style="background-color: rgba(0,0,0,0.2);"><tr><td>ရက်စွဲ</td><td>ခေါင်းစဉ်</td><td>ပမာဏ</td><td>ဝင်ငွေစုစုပေါင်း</td></tr>');
			}
			else
			{
				$("#toappend").append("<center><span style='color:red;'>စားရင်းများမထည့်ရသေးပါ</span></center>");
			}
		}

		function outcome()
		{
			var rkm=localStorage.outcome;
			if(rkm)
			{
				var data=JSON.parse(rkm);
				$("#toappend").empty();
				for(i=0;i<data.length;i++)
				{
					$("#toappend").prepend('<div style="width: 100%;height: 45px;margin-top:7px;"><center><table class="mytable" cellspacing="0" width="100%" style="background-color: rgba(0,0,0,0.2);"><tr><th>ရက်စွဲ</th><th>ခေါင်းစဉ်</th><th>သုံးငွေ</th><th>လက်ကျန်ငွေ</th></tr><tr><td>'+convertEngToMyanmar(data[i].date+'/'+data[i].newmonth+'/'+data[i].newyear)+'</td><td>'+data[i].outcometype+'</td><td>'+convertEngToMyanmar(data[i].outcomeamount)+' ကျပ်</td><td>'+convertEngToMyanmar(data[i].remain)+' ကျပ်</td></tr></table></center></div>');
				}
			}
		}
		$(document).ready(function(){
			getdata();
			//outcome();

			var month_arr = [31,28,31,30,31,30,31,31,30,31,30,31];	
			var day_name = ["တနင်္ဂနွေ","တနင်္လာ","အင်္ဂါ","ဗုဒ္ဂဟူး","ကြာသပတေး","သောကြာ","စနေ"];	
			var today=new Date();
			console.log(today);
			var date = today.getDate();
			console.log(date);
			var month = today.getMonth();
			console.log(month);
			var day = today.getDay();
			console.log(day);
			var year=today.getYear();

			var full_month = month_arr[month] ;
			var remaining_day = full_month - date ;
			console.log("remaining_day is "+remaining_day);

			var remaining_day_name = day + remaining_day ;
			remaining_day_name = remaining_day_name % 7 ;
			console.log("remaining_day_name is "+remaining_day_name);
			if(remaining_day_name == 0 ) {
				remaining_day -= 2 ;
				remaining_day_name = 5 ;
			}
			else if(remaining_day_name == 6 ) {
				remaining_day -= 1 ;
				remaining_day_name = 5 ;
			}
			console.log("remaining_day is "+remaining_day);

			var final_result = (remaining_day + date);
			console.log("final_result is "+final_result);

			$("#remaining_day").html(convertEngToMyanmar(remaining_day));
			$("#remaining_date").html(convertEngToMyanmar(final_result)+ " " + day_name[remaining_day_name]);



			// var custom_str = "2019-12-31";
			// var mon = new Date("2019-12-31");
			// console.log(mon);

			$(document).on("click","#modalclose",function(){
				$(".mymodal").hide();
			});
			$(document).on("click",".income",function(){
				$(".mymodal").show();
			});
			$(document).on("click",".minusbtn",function(){
				$("#outcomeamount").val("");
				//$(".outcometype").val("");
				$("#plusmodal").show();
				outcome();
				$("#mychart").hide();
				$("#toappend").show();
			});
			$(document).on("click",".closeadd",function(){
				$("#plusmodal").hide();
			});
			$(document).on("click",".plusbtn",function(){
				$("#incomeamount").val("");
				$("#incometitle").val("");
				$("#incomemodal").show();
				getdata();
				$("#mychart").hide();
				$("#toappend").show();
			});
			$(document).on("click",".closeincome",function(){
				$("#incomemodal").hide();
			});
			// ========================= save income ==============
			console.log((month+1)+"  :  "+(year+1900));
			var newmonth=month+1,newyear=year+1900;
			$(document).on("click",".saveincome",function(){
				var title=$("#incometitle").val();
				var amount=$("#incomeamount").val();console.log("title :"+title+" ,amount :"+amount);
				var arr=new Array();
				var totals=amount;
				arr=[{date,newmonth,newyear,title,amount,totals}];//alert(arr[0].amount);
				var org=JSON.parse(localStorage.getItem('localdata'));
				var orgtotal=localStorage.getItem(''+toString(newmonth)+toString(newyear)+'');
				if(org)
				{
					var totals=parseInt(orgtotal)+parseInt(arr[0].amount);//alert(arr.amount);
					arrs=[{date,newmonth,newyear,title,amount,totals}];
					var newdata=org.concat(arrs);
					
					localStorage.setItem('localdata',JSON.stringify(newdata));
					localStorage.setItem(''+toString(newmonth)+toString(newyear)+'',JSON.stringify(totals));console.log("OKOK");
				}
				else
				{
					localStorage.setItem('localdata',JSON.stringify(arr));
					localStorage.setItem(''+toString(newmonth)+toString(newyear)+'',arr[0].amount);console.log("OK");
				}
				$("#incomemodal").hide();
				getdata();
			});
			//console.log(JSON.parse(localStorage.localdata));
			//console.log(localStorage.getItem(''+toString(newmonth)+toString(newyear)+''));

			// ================================ save outcome ================================
			$(document).on("click",".insertoutcome",function(){
				var outcometype=$(".outcometype").val();
				var outcomeamount=$("#outcomeamount").val();console.log(outcometype+outcomeamount);

				var org=JSON.parse(localStorage.getItem('outcome'));
				var totals=localStorage.getItem(''+toString(newmonth)+toString(newyear)+'');
				if(org)
				{
					var totalamount=0;
					for(i=0;i<org.length;i++)
					{
						totalamount+=parseInt(org[i].outcomeamount);
					}
					totalamount+=parseInt(outcomeamount);
					var remain=totals-totalamount;//alert(totals+'-'+totalamount);alert(remain); 
					var arr=new Array();
					arrs=[{date,newmonth,newyear,outcometype,outcomeamount,remain}];
					var newdata=org.concat(arrs);
					localStorage.setItem('outcome',JSON.stringify(newdata));
				}
				else
				{
					var arr=new Array();
					var remain=totals-outcomeamount;//alert(remain);
					arr=[{date,newmonth,newyear,outcometype,outcomeamount,remain}];
					localStorage.setItem('outcome',JSON.stringify(arr));
				}
				$("#plusmodal").hide();
				outcome();
			});

			// ======================= chart ================
			function report()
			{
				var orgs=JSON.parse(localStorage.getItem('outcome'));
				if(orgs)
				{
					var food=0,phone=0;cloth=0,offer=0,other=0,parents=0,borrow=0;
					for(i=0;i<orgs.length;i++)
					{
						if(orgs[i].outcometype=='အစားအစာ') food+= parseInt(orgs[i].outcomeamount);
						else if(orgs[i].outcometype=='အဝတ်အစား') cloth+= parseInt(orgs[i].outcomeamount);
						else if(orgs[i].outcometype=='ဖုန်းဘေ') phone+= parseInt(orgs[i].outcomeamount);
						else if(orgs[i].outcometype=='အလှူ') offer+= parseInt(orgs[i].outcomeamount);
						else if(orgs[i].outcometype=='အထွေထွေ') other+= parseInt(orgs[i].outcomeamount);
						else if(orgs[i].outcometype=='မိဘကန်တော့') parents+= parseInt(orgs[i].outcomeamount);
						else if(orgs[i].outcometype=='အကြွေး') borrow+= parseInt(orgs[i].outcomeamount);
					}

					//pie
					var ctxP = document.getElementById("pieChart").getContext('2d');
					var myPieChart = new Chart(ctxP, {
						type: 'pie',
						data: {
						labels: ["အစားအသောက်", "ဖုန်းဘေ", "အဝတ်အစား", "အလှူ", "အထွေထွေ","မိဘကန်တော့","အကြွေး"],
						datasets: [{
						data: [food, phone, cloth, offer, other,parents,borrow],
						backgroundColor: ["#F7464A", "#46BFBD", "#FDB45C", "#949FB1", "#4D5360","#047CBA","green"],
						hoverBackgroundColor: ["#FF5A5E", "#5AD3D1", "#FFC870", "#A8B3C5", "#616774","#047CBA","green"]
						}]
						},
						options: {
						responsive: true
						}
					});
				}
				else
				{
					//pie
					var ctxP = document.getElementById("pieChart").getContext('2d');
					var myPieChart = new Chart(ctxP, {
						type: 'pie',
						data: {
						labels: ["အစားအသောက်", "ဖုန်းဘေ", "အဝတ်အစား", "အလှူ", "အထွေထွေ"],
						datasets: [{
						data: [0, 0, 0, 0, 0],
						backgroundColor: ["#F7464A", "#46BFBD", "#FDB45C", "#949FB1", "#4D5360"],
						hoverBackgroundColor: ["#FF5A5E", "#5AD3D1", "#FFC870", "#A8B3C5", "#616774"]
						}]
						},
						options: {
						responsive: true
						}
					});
				}
			}
			
			$(document).on("click",".report",function(){
				report();
				$("#mychart").show();
				$("#toappend").hide();
			});
	
		});
	</script>
	<!-- Our JavaScript -->
	
</body>
</html>